<div class="suivi-equipes">
  <div class="header">
    <h2>Suivi des √âquipes</h2>
    <p>G√©rez les √©quipes et suivez les performances de vos collaborateurs</p>
  </div>

  <!-- Vue d'ensemble des √©quipes -->
  <div class="overview-section">
    <div class="section-header">
      <h3>Vue d'ensemble des √©quipes</h3>
      <button class="btn btn-primary" (click)="isEditingEquipe = true; isEditingMembre = false">
        + Nouvelle √©quipe
      </button>
    </div>

    <div class="teams-grid">
      <div 
        *ngFor="let equipe of equipes" 
        class="team-card"
        [ngClass]="getStatutClass(equipe.statut)">
        <div class="team-header">
          <h4>{{ equipe.nom }}</h4>
          <div class="team-actions">
            <button 
              class="btn-icon"
              (click)="modifierEquipe(equipe)"
              title="Modifier l'√©quipe">
              ‚úèÔ∏è
            </button>
            <button 
              class="btn-icon"
              (click)="supprimerEquipe(equipe.id)"
              title="Supprimer l'√©quipe">
              üóëÔ∏è
            </button>
          </div>
        </div>

        <div class="team-content">
          <div class="team-info">
            <div class="info-item">
              <span class="label">Responsable:</span>
              <span class="value">{{ equipe.responsable }}</span>
            </div>
            <div class="info-item">
              <span class="label">Domaine:</span>
              <span class="value">{{ equipe.domaine }}</span>
            </div>
            <div class="info-item">
              <span class="label">Membres:</span>
              <span class="value">{{ equipe.nombreMembres }} personnes</span>
            </div>
            <div class="info-item">
              <span class="label">Projets en cours:</span>
              <span class="value">{{ equipe.projetsEnCours }}</span>
            </div>
          </div>

          <div class="performance-section">
            <div class="performance-bar">
              <div class="performance-fill" 
                   [ngClass]="getPerformanceClass(equipe.performance)"
                   [style.width.%]="equipe.performance">
              </div>
            </div>
            <span class="performance-text">{{ equipe.performance }}%</span>
          </div>

          <div class="team-status">
            <span class="badge" [ngClass]="getStatutClass(equipe.statut)">
              {{ equipe.statut }}
            </span>
          </div>

          <button 
            class="btn btn-outline"
            (click)="filtrerParEquipe(equipe.nom)">
            Voir les membres
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Formulaire d'√©quipe -->
  <div class="form-section" *ngIf="isEditingEquipe">
    <div class="card">
      <div class="card-header">
        <h3>{{ editingEquipeId ? 'Modifier l\'√©quipe' : 'Nouvelle √©quipe' }}</h3>
      </div>
      <div class="card-body">
        <form [formGroup]="equipeForm" (ngSubmit)="editingEquipeId ? sauvegarderEquipe() : ajouterEquipe()">
          <div class="form-row">
            <div class="form-group">
              <label for="nomEquipe">Nom de l'√©quipe *</label>
              <input 
                type="text" 
                id="nomEquipe" 
                formControlName="nom" 
                class="form-control"
                placeholder="Nom de l'√©quipe">
            </div>
            <div class="form-group">
              <label for="responsable">Responsable *</label>
              <input 
                type="text" 
                id="responsable" 
                formControlName="responsable" 
                class="form-control"
                placeholder="Nom du responsable">
            </div>
          </div>

          <div class="form-group">
            <label for="domaine">Domaine d'activit√© *</label>
            <input 
              type="text" 
              id="domaine" 
              formControlName="domaine" 
              class="form-control"
              placeholder="Domaine d'activit√©">
          </div>

          <div class="form-actions">
            <button 
              type="submit" 
              class="btn btn-primary"
              [disabled]="!equipeForm.valid">
              {{ editingEquipeId ? 'Sauvegarder' : 'Cr√©er l\'√©quipe' }}
            </button>
            <button 
              type="button" 
              class="btn btn-secondary"
              (click)="annulerModificationEquipe()">
              Annuler
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Gestion des membres -->
  <div class="members-section">
    <div class="section-header">
      <h3>Gestion des membres</h3>
      <button class="btn btn-primary" (click)="isEditingMembre = true; isEditingEquipe = false">
        + Nouveau membre
      </button>
    </div>

    <!-- Formulaire de membre -->
    <div class="form-section" *ngIf="isEditingMembre">
      <div class="card">
        <div class="card-header">
          <h3>{{ editingMembreId ? 'Modifier le membre' : 'Nouveau membre' }}</h3>
        </div>
        <div class="card-body">
          <form [formGroup]="membreForm" (ngSubmit)="editingMembreId ? sauvegarderMembre() : ajouterMembre()">
            <div class="form-row">
              <div class="form-group">
                <label for="nomMembre">Nom complet *</label>
                <input 
                  type="text" 
                  id="nomMembre" 
                  formControlName="nom" 
                  class="form-control"
                  placeholder="Nom complet">
              </div>
              <div class="form-group">
                <label for="poste">Poste *</label>
                <input 
                  type="text" 
                  id="poste" 
                  formControlName="poste" 
                  class="form-control"
                  placeholder="Poste occup√©">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="email">Email *</label>
                <input 
                  type="email" 
                  id="email" 
                  formControlName="email" 
                  class="form-control"
                  placeholder="email@exemple.com">
              </div>
              <div class="form-group">
                <label for="telephone">T√©l√©phone *</label>
                <input 
                  type="tel" 
                  id="telephone" 
                  formControlName="telephone" 
                  class="form-control"
                  placeholder="+33 1 23 45 67 89">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="dateEmbauche">Date d'embauche *</label>
                <input 
                  type="date" 
                  id="dateEmbauche" 
                  formControlName="dateEmbauche" 
                  class="form-control">
              </div>
              <div class="form-group">
                <label for="equipeMembre">√âquipe *</label>
                <select id="equipeMembre" formControlName="equipe" class="form-control">
                  <option value="">S√©lectionner une √©quipe</option>
                  <option *ngFor="let equipe of equipes" [value]="equipe.nom">
                    {{ equipe.nom }}
                  </option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="statut">Statut *</label>
              <select id="statut" formControlName="statut" class="form-control">
                <option value="actif">Actif</option>
                <option value="inactif">Inactif</option>
                <option value="en cong√©">En cong√©</option>
              </select>
            </div>

            <div class="form-actions">
              <button 
                type="submit" 
                class="btn btn-primary"
                [disabled]="!membreForm.valid">
                {{ editingMembreId ? 'Sauvegarder' : 'Ajouter le membre' }}
              </button>
              <button 
                type="button" 
                class="btn btn-secondary"
                (click)="annulerModificationMembre()">
                Annuler
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Liste des membres -->
    <div class="members-grid">
      <div 
        *ngFor="let membre of selectedEquipe ? getMembresEquipe(selectedEquipe) : membres" 
        class="member-card"
        [ngClass]="getPerformanceClass(membre.performance)">
        <div class="member-header">
          <h4>{{ membre.nom }}</h4>
          <div class="member-actions">
            <button 
              class="btn-icon"
              (click)="modifierMembre(membre)"
              title="Modifier le membre">
              ‚úèÔ∏è
            </button>
            <button 
              class="btn-icon"
              (click)="supprimerMembre(membre.id)"
              title="Supprimer le membre">
              üóëÔ∏è
            </button>
          </div>
        </div>

        <div class="member-content">
          <div class="member-info">
            <div class="info-item">
              <span class="label">Poste:</span>
              <span class="value">{{ membre.poste }}</span>
            </div>
            <div class="info-item">
              <span class="label">√âquipe:</span>
              <span class="value">{{ membre.equipe }}</span>
            </div>
            <div class="info-item">
              <span class="label">Email:</span>
              <span class="value">{{ membre.email }}</span>
            </div>
            <div class="info-item">
              <span class="label">T√©l√©phone:</span>
              <span class="value">{{ membre.telephone }}</span>
            </div>
            <div class="info-item">
              <span class="label">Embauch√© le:</span>
              <span class="value">{{ membre.dateEmbauche | date:'dd/MM/yyyy' }}</span>
            </div>
          </div>

          <div class="performance-section">
            <div class="performance-bar">
              <div class="performance-fill" 
                   [ngClass]="getPerformanceClass(membre.performance)"
                   [style.width.%]="membre.performance">
              </div>
            </div>
            <span class="performance-text">{{ membre.performance }}%</span>
          </div>

          <div class="member-status">
            <span class="badge" [ngClass]="'statut-' + membre.statut">
              {{ membre.statut }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="(selectedEquipe ? getMembresEquipe(selectedEquipe) : membres).length === 0" class="empty-state">
      <div class="empty-icon">üë•</div>
      <h4>Aucun membre trouv√©</h4>
      <p>{{ selectedEquipe ? 'Cette √©quipe n\'a pas encore de membres.' : 'Commencez par ajouter des membres d\'√©quipe.' }}</p>
    </div>
  </div>
</div>
